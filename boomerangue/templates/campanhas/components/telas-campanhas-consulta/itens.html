<!-- Chart widget top Ends-->
{% load static %}
<style>
  .text-white {
    color: white;
}
</style>
<div class="col-xl-12">
<div class="card ongoing-project recent-orders">
  <div class="card-header card-no-border">
    <div class="media media-dashboard">
      <div class="media-body">
        <h5 class="mb-0">Itens</h5>
      </div>
      <div id="remote-itens" class="me-3">
        <div>
            <input class="typeahead form-control" type="text" placeholder="Pesquisar...">
            <div class="input-group-append">
              <span class="loading-indicator-itens input-group-text text-primary" style="display: none;"><i class="fa fa-spin fa-spinner"></i></span>
            </div>
          </div>
      </div>
      <!-- <a class="btn btn-secondary" data-bs-toggle="modal" id="criar_template_mensagem_btn" data-bs-target="#criar_template_mensagem">
        Criar mensagem
      </a> -->
      
    </div>
  </div>
  <div class="card-body pt-0">
    <div class="table-responsive">
      <table class="table table-bordernone" id="item-table-itens">
        <thead>
          <tr>
            <th><span>Descrição Produto</span></th>
            <th><span>Valor Atacado</span></th>
            <th><span>Valor Unitário</span></th>
            <th><span>Valor Total Item</span></th>
            <th><span>Unidade Caixa</span></th>
            <th><span>Unidade Venda</span></th>
            <th><span>Item Ativo</span></th>
            <th><span>Arquivo de Origem</span></th>
            <th><span>Mais</span></th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>
              <div class="media">
                <div class="square-box me-2">
                  {% if item.produto.PathProduto %}
                  <img src="{{item.produto.PathProduto}}"  style="width: 100%; height: 100%; object-fit: contain;" onerror="this.onerror=null;this.src='{% static 'assets\images\banner\Produto-sem-foto.png' %}';">
                  {% else %}
                  <i class=""></i>
                  {% endif %}
                </div>
                <div class="media-body ps-2">
                  <div class="avatar-details"><a href="/">
                      <h6>{{item.produto.Descricao}}</h6>
                    </a><span>{{item.pk}}</span></div>
                </div>
              </div>
            </td>
            <td class="img-content-box">
              <h6>{{item.valor_atacado|floatformat:2|default:0}}</h6>
            </td>
            <td>
              <h6>{{item.valor_unitario|floatformat:2|default:0}}</h6>
            </td>
            <td style="min-width: 100px;">
              <h6>{{item.valor_total_item}}</h6>
            </td>
            <td>
              <h6>{{item.unidade_caixa}}</h6>
            </td>
            <td>
              <h6>{{item.unidade_venda}}</h6>
            </td>
            <td>
              <h6><span class="text-white badge badge-{% if item.item_ativo == 'S' %}success{% else %}danger{%endif%}">{{item.item_ativo}}</span></h6>
            </td>
            <td>
              <h6>{{item.templateimportado.NomeArquivo}}</h6>
            </td>
            <td>
              <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                      aria-haspopup="true" aria-expanded="false">Opções</button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item"
                        href="#" onclick="deleteitem('{{item.id}}')">Desativar item</a>
                        <a class="dropdown-item"
                        href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#editar_item" onclick="editaritem('{{item.id}}')">Editar</a>
                    </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <div class="loader-box" id="loader_itens" style="display: none;">
        <div class="loader-2"></div>
      </div>
    </div>
  </div>
  
</div>
<div class="modal fade modal-bookmark" id="criar_template_mensagem" tabindex="-1" role="dialog"
aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">Criar Template de Mensagem</h5>
      <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <form class="form-bookmark needs-validation" id="create_form" novalidate="">
        <div class="row g-2">
          <div class="col-sm-12">
            <div class="card">
              <div class="card-body">

                <div class="mb-3">
                  <label class="control-label">Whatsapp Template</label>
                  <select class="js-example-basic-single" type="text" name="wpptemplate" id="select_wpp_templates" required="required">
                    <option value="">Selecione uma opção</option>
                    {% for wpp_template in wpp_templates %}
                      <option value="{{ wpp_template.id }}">{{ wpp_template.template_name }}</option>
                    {% endfor %}
                  </select>
                </div>

                <div class="mb-3">
                  <label class="control-label">Uso Template</label>
                  <select class="form-control" type="text" name="usotemplate" id="usotemplate" required="required">
                    <option value="OPTIN">Optin</option>
                    <option value="ENVIO">Envio</option>
                  </select>
                </div>

                <button class="btn btn-secondary" type="button" id="salvar_template_mensagem" onclick="criarTemplateMessages()">Salvar</button>
                <button class="btn btn-primary" type="button" data-bs-dismiss="modal">Cancelar</button>
                
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
</div>

<div class="modal fade modal-bookmark" id="editar_item" tabindex="-1" role="dialog"
aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">Editar Item</h5>
      <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <form class="form-bookmark needs-validation" id="create_form" novalidate="">
        <div class="row g-2">
          <div class="col-sm-12">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="mb-3 col-12">
                    <label class="control-label">Imagem</label>
                    <div style="width: 180px; height: 180px;">
                      <img src="" alt="" id="imagem_item" style="object-fit: cover; width: 100%; height: 100%;">
                    </div>
                    <div class="mt-2">
                      <label for="">Imagem atual</label>
                      <input type="text" id="PathProduto" class="form-control">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="mb-3 col-md-6 col-12">
                    <label class="control-label">Descrição Item</label>
                    <input type="text" id="Descricao_Amigavel" class="form-control">
                  </div>
                  <div class="mb-3 col-md-6 col-12">
                    <label class="control-label">Preço</label>
                    <input type="text" id="valor_unitario_" class="form-control ">
                  </div>
                </div>
                <div class="row">
                  <div class="mb-3 col-md-3 col-12">
                    <label class="control-label">Quantidade disponível</label>
                    <input type="number" id="quantidade_disponivel" class="form-control">
                  </div>
                  <div class="mb-3 col-md-3 col-12">
                    <label class="control-label">Múltiplo boomerangue</label>
                    <input type="number" id="multiplo_boomerangue" class="form-control">
                  </div>
                  <div class="mb-3 col-md-3 col-12">
                    <label class="control-label">Quantidade máxima</label>
                    <input type="number" id="quantidade_maxima" class="form-control">
                  </div>
                  <div class="mb-3 col-md-3 col-12">
                    <label class="control-label">Quantidade mínima</label>
                    <input type="number" id="quantidade_minima" class="form-control">
                  </div>
                </div>
                <button class="btn btn-secondary" type="button" id="salvar_itens_edicao" data-id='' onclick="save_edicao_itens(this)">Salvar</button>
                <button class="btn btn-primary" type="button" data-bs-dismiss="modal">Cancelar</button>
                
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
</div>


</div>

