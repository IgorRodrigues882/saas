<!-- Chart widget top Ends-->
<style>
    .text-white {
      color: white;
  }
</style>
<div class="col-xl-12">
  <div class="card ongoing-project recent-orders">
    <div class="card-header card-no-border">
      <div class="media media-dashboard">
        <div class="media-body">
          <h5 class="mb-0">Mensagens</h5>
        </div>
        <div id="remote-mensagens" class="me-3">
          <div>
              <input class="typeahead form-control" type="text" placeholder="Pesquisar...">
              <div class="input-group-append">
                <span class="loading-indicator-2 input-group-text text-primary" style="display: none;"><i class="fa fa-spin fa-spinner"></i></span>
              </div>
            </div>
        </div>
        <a class="btn btn-secondary" data-bs-toggle="modal" id="criar_template_mensagem_btn" data-bs-target="#criar_template_mensagem">
          Criar mensagem
        </a>
        
      </div>
    </div>
    <div class="card-body pt-0">
      <div class="table-responsive">
        <table class="table table-bordernone" id="item-table2">
          <thead>
            <tr>
              <th><span>Mensagem</span></th>
              <th><span>Linguagem</span></th>
              <th><span>Uso Template</span></th>
              <th><span>Mais</span></th>
            </tr>
          </thead>
          <tbody>
            {% for mensagem in mensagens %}
            <tr>
              <td>
                <div class="media">
                  <div class="square-box me-2"><i class="fa fa-file-text-o txt-info"></i></div>
                  <div class="media-body ps-2">
                    <div class="avatar-details"><a href="/">
                        <h6>{{mensagem.wpptemplate.template_name}}</h6>
                      </a><span>{{mensagem.wpptemplate.get_category_display}}</span></div>
                  </div>
                </div>
              </td>
              <td class="img-content-box">
                <h6>{{mensagem.wpptemplate.language}}</h6>
              </td>
              <td>
                <h6>{%if mensagem.usotemplate == 'OPTIN'%}<span class="badge badge-secondary text-white">Optin</span>{%else%}<span class="badge badge-success text-white">Envio</span>{%endif%}</h6>
              </td>
              <td>
                <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                          aria-haspopup="true" aria-expanded="false">Opções</button>
                        <div class="dropdown-menu">
                          <a class="dropdown-item"
                            href="#" onclick="deleteTemplateMensagem('{{mensagem.pk}}')">Excluir</a>
                            <a class="dropdown-item"
                            href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#criar_template_mensagem" onclick="edit_template_mensagem('{{mensagem.pk}}')">Editar</a>
                            <a class="dropdown-item"
                            href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#ver_componentes"  onclick="ver_componentes('{{mensagem.wpptemplate.pk}}')">Ver Componentes</a>
                        </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        <div class="loader-box" id="loader2" style="display: none;">
          <div class="loader-2"></div>
        </div>
      </div>
    </div>
    
  </div>
  <div class="modal fade modal-bookmark" id="criar_template_mensagem" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Criar Template de Mensagem</h5>
        <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form class="form-bookmark needs-validation" id="create_form" novalidate="">
          <div class="row g-2">
            <div class="col-sm-12">
              <div class="card">
                <div class="card-body">

                  <div class="mb-3">
                    <label class="control-label">Whatsapp Template</label>
                    <select class="js-example-basic-single" type="text" name="wpptemplate" id="select_wpp_templates" required="required">
                      <option value="">Selecione uma opção</option>
                      {% for wpp_template in wpp_templates %}
                        <option value="{{ wpp_template.id }}">{{ wpp_template.template_name }}</option>
                      {% endfor %}
                    </select>
                  </div>

                  <div class="mb-3">
                    <label class="control-label">Uso Template</label>
                    <select class="form-control" type="text" name="usotemplate" id="usotemplate" required="required">
                      <option value="OPTIN">Optin</option>
                        <option value="ENVIO">Envio</option>
                        <option value="REP1">Repique 1</option>
                        <option value="REP2">Repique 2</option>
                        <option value="CRABN">Carrinho Abandonado</option>
                        <option value="CPRCB">Compra Recebida</option>
                    </select>
                  </div>

                  <button class="btn btn-secondary" type="button" id="salvar_template_mensagem" onclick="criarTemplateMessages()">Salvar</button>
                  <button class="btn btn-primary" type="button" data-bs-dismiss="modal">Cancelar</button>
                  
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

</div>



